{"file_path": "/Users/sz904/Desktop/11711/LTI_Neural_Navigator/data/2024-02-26/chunk_paper_txt/Yiming_Yang_Automatic_synchrotron_tomographic_alignment_schemes_based_on_genetic_algorithms_and_human-in-the-loop_software_chunk_3.txt", "num_qa_pairs": 10, "qa_list": [{"question": " What do motor x and motor z control in the sample positioning stage?", "answer": " The movement of the sample", "ref_chunk": "171 research papers Figure 2 (a) Sample positioning stage. Motor x and motor z control the movement of the sample, the rotation motor controls the rotation of the sample, and motor (cid:3) and motor (cid:4) control the tilt of the rotation axis. (b) Rotary-axis tilt model. The tilt angle of the axis of rotation can be split into the superposition of two orthogonal vectors. (c) Physical model of the rotary axis coarse alignment. The adjustment angle of the axis of rotation is roughly calculated from the coordinates of the four feature points. alignment scenario, the staff usually use a needle or other standard sample with one strong absorbing particle. There- fore, temporarily, here we only extract and track one strong absorbing particle of the walnut sample, which can be easily \ufb01ltered out by setting a higher grayscale threshold to obtain its motion trajectory. Ideally, the trajectory of the particle will form a straight line after one turn of rotation without any tilt ((cid:2)Xt = 0, (cid:2)Zt = 0). As shown in Fig. 3, when (cid:2)Xt = 0 and (cid:2)Zt 6\u00bc 0, the trajectory of the particle turns out to be an ellipse. When 6\u00bc 0 and (cid:2)Zt = 0, the trajectory of the particle forms a (cid:2)Xt straight line at a certain angle to the horizontal direction, with its two endpoints collected from projection angles 90(cid:3) and 270(cid:3). When (cid:2)Xt 6\u00bc 0 and (cid:2)Zt 6\u00bc 0, the trajectory of the particle will be a tilted ellipse, from which (cid:2)Xt and (cid:2)Zt can be calculated as (cid:2)Xt \u00bc arctan (cid:2) y1 (cid:4) y2 x1 (cid:4) x2 (cid:3) 180 (cid:5) ; (cid:2)Zt \u00bc arcsin ( (cid:4) \u00f0 \u00f0 x3 (cid:4) x4 x1 (cid:4) x2 \u00de2 \u00fe y3 (cid:4) y4 \u00f0 \u00de2 \u00fe y1 (cid:4) y2 \u00f0 \u00de2 \u00de2 (cid:5)1=2 ) 180 (cid:5) ; Figure 3 Particle trajectories under different rotation-axis misalignment situations. 172 Zhen Zhang et al. (cid:2) Automatic synchrotron tomographic alignment schemes J. Synchrotron Rad. (2023). 30, 169\u2013178 \u00f01\u00de \u00f02\u00de research papers where x1, x2, x3 and x4 are the horizontal coordinate values of P1, P2, P3 and P4, and y1, y2, y3 and y4 are the vertical coor- dinates values of P1, P2, P3 and P4, respectively. P1 and P2 are the vertices of the major axis of the ellipse \ufb01tted to the trajectory of the feature particle, while P3 and P4 are the two points on the ellipse with the same x-coordinate of the midpoint of the minor axis. A two-step alignment procedure is introduced for the rotation-axis alignment: coarse alignment and \ufb01ne alignment, as shown in Fig. 4. For the coarse alignment, the tilt angles of motor (cid:3) and motor (cid:4) are corrected by equations (1) and (2). For the \ufb01ne alignment of the rotation axis based on the GA, a series of individuals of random rotation-axis positions (motor (cid:3) and motor (cid:4)) are generated to form the initial population around the coarsely aligned rotation-axis position. The population \ufb01tness is assessed according to the trajectory characteristics of the strong absorbing particle. After several rounds of selection, crossover and mutation, the population \ufb01nally reaches convergence and obtains the optimum adjust- ment angles. To avoid repetition in data acquisition, the trajectory information of new individuals in the previous generations will be stored for the new iteration. Typically, we set two adjustment accuracy modes to accommodate different adjustment needs: (a) 15 population iterations for a popula- tion of 20 individuals and (b) 15 population iterations for a population of 30 individuals. The number of population iterations and individuals are application-scenario-dependent input parameters for the alignment program. The program can also be terminated early by human intervention if the popu- lation has converged. 2.3. Sample alignment To simulate the projection images for a misaligned sample with respect to the rotation axis, an offset was applied on the sample. In the virtual experiment, this offset is a combination of the offsets of the two sample motors (motor x and motor z), which we denote as offset_ x and offset_ z. The physical model for the coarse alignment is shown in Fig. S1 of the supporting information. During the coarse alignment of the sample, \ufb01rstly we performed one coarse tomography scan and checked whether the sample was within the \ufb01eld of view (FoV) of the detector for all projections. If the sample was falling out of the FoV at certain projections, another scan was performed from Figure 4 (a) The process of \ufb01ne alignment of the rotation axis. Genetic-algorithm-based selection, crossover, mutation and inheritance processes for rotating-axis individuals. (b) Framework design of the rotation alignment software. The blue color indicates the rotation alignment algorithm and its associated functional modules, and the orange color indicates the GUI module. J. Synchrotron Rad. (2023). 30, 169\u2013178 Zhen Zhang et al. (cid:2) Automatic synchrotron tomographic alignment schemes 173 research papers 0(cid:3) to 180(cid:3) to \ufb01nd the projection angle !1 where the sample was completely rotated back into the FoV and the angle !2 where the center of the sample reached the center of the detector. After that, we obtained the distance between the sample center and the detector center at the !1 angle and denoted this distance as distance_ !1. Among them, the offsets of the two motors can be expressed as Here, according to the relationship of the offset and the reference angles, we can obtain offset_ x and offset_ z by equations (5) and (6), offset x \u2019 distance !1 sin\u00f0!1\u00de (cid:4) cos\u00f0!1\u00de tan\u00f0!2\u00de ; offset z \u2019 (cid:4)offset x tan\u00f0!2\u00de: tan !2\u00f0 \u00de \u2019 (cid:4) offset x offset z : Meanwhile, distance_ !1 can be expressed as the superposition of two offsets at angle !1, distance !1 \u00bc offset x sin\u00f0!1\u00de \u00fe offset z cos\u00f0!1\u00de: \u00f03\u00de \u00f04\u00de The sample was then moved according to the calculated offset_ x and offset_ z for the coarse alignment. Following the coarse alignment, a \ufb01ne alignment process triggered by genetic algorithm is required for further alignment work as shown in Fig. 5. Based on genetic algorithm, we use movement"}, {"question": " What controls the rotation of the sample in the sample positioning stage?", "answer": " The rotation motor", "ref_chunk": "171 research papers Figure 2 (a) Sample positioning stage. Motor x and motor z control the movement of the sample, the rotation motor controls the rotation of the sample, and motor (cid:3) and motor (cid:4) control the tilt of the rotation axis. (b) Rotary-axis tilt model. The tilt angle of the axis of rotation can be split into the superposition of two orthogonal vectors. (c) Physical model of the rotary axis coarse alignment. The adjustment angle of the axis of rotation is roughly calculated from the coordinates of the four feature points. alignment scenario, the staff usually use a needle or other standard sample with one strong absorbing particle. There- fore, temporarily, here we only extract and track one strong absorbing particle of the walnut sample, which can be easily \ufb01ltered out by setting a higher grayscale threshold to obtain its motion trajectory. Ideally, the trajectory of the particle will form a straight line after one turn of rotation without any tilt ((cid:2)Xt = 0, (cid:2)Zt = 0). As shown in Fig. 3, when (cid:2)Xt = 0 and (cid:2)Zt 6\u00bc 0, the trajectory of the particle turns out to be an ellipse. When 6\u00bc 0 and (cid:2)Zt = 0, the trajectory of the particle forms a (cid:2)Xt straight line at a certain angle to the horizontal direction, with its two endpoints collected from projection angles 90(cid:3) and 270(cid:3). When (cid:2)Xt 6\u00bc 0 and (cid:2)Zt 6\u00bc 0, the trajectory of the particle will be a tilted ellipse, from which (cid:2)Xt and (cid:2)Zt can be calculated as (cid:2)Xt \u00bc arctan (cid:2) y1 (cid:4) y2 x1 (cid:4) x2 (cid:3) 180 (cid:5) ; (cid:2)Zt \u00bc arcsin ( (cid:4) \u00f0 \u00f0 x3 (cid:4) x4 x1 (cid:4) x2 \u00de2 \u00fe y3 (cid:4) y4 \u00f0 \u00de2 \u00fe y1 (cid:4) y2 \u00f0 \u00de2 \u00de2 (cid:5)1=2 ) 180 (cid:5) ; Figure 3 Particle trajectories under different rotation-axis misalignment situations. 172 Zhen Zhang et al. (cid:2) Automatic synchrotron tomographic alignment schemes J. Synchrotron Rad. (2023). 30, 169\u2013178 \u00f01\u00de \u00f02\u00de research papers where x1, x2, x3 and x4 are the horizontal coordinate values of P1, P2, P3 and P4, and y1, y2, y3 and y4 are the vertical coor- dinates values of P1, P2, P3 and P4, respectively. P1 and P2 are the vertices of the major axis of the ellipse \ufb01tted to the trajectory of the feature particle, while P3 and P4 are the two points on the ellipse with the same x-coordinate of the midpoint of the minor axis. A two-step alignment procedure is introduced for the rotation-axis alignment: coarse alignment and \ufb01ne alignment, as shown in Fig. 4. For the coarse alignment, the tilt angles of motor (cid:3) and motor (cid:4) are corrected by equations (1) and (2). For the \ufb01ne alignment of the rotation axis based on the GA, a series of individuals of random rotation-axis positions (motor (cid:3) and motor (cid:4)) are generated to form the initial population around the coarsely aligned rotation-axis position. The population \ufb01tness is assessed according to the trajectory characteristics of the strong absorbing particle. After several rounds of selection, crossover and mutation, the population \ufb01nally reaches convergence and obtains the optimum adjust- ment angles. To avoid repetition in data acquisition, the trajectory information of new individuals in the previous generations will be stored for the new iteration. Typically, we set two adjustment accuracy modes to accommodate different adjustment needs: (a) 15 population iterations for a popula- tion of 20 individuals and (b) 15 population iterations for a population of 30 individuals. The number of population iterations and individuals are application-scenario-dependent input parameters for the alignment program. The program can also be terminated early by human intervention if the popu- lation has converged. 2.3. Sample alignment To simulate the projection images for a misaligned sample with respect to the rotation axis, an offset was applied on the sample. In the virtual experiment, this offset is a combination of the offsets of the two sample motors (motor x and motor z), which we denote as offset_ x and offset_ z. The physical model for the coarse alignment is shown in Fig. S1 of the supporting information. During the coarse alignment of the sample, \ufb01rstly we performed one coarse tomography scan and checked whether the sample was within the \ufb01eld of view (FoV) of the detector for all projections. If the sample was falling out of the FoV at certain projections, another scan was performed from Figure 4 (a) The process of \ufb01ne alignment of the rotation axis. Genetic-algorithm-based selection, crossover, mutation and inheritance processes for rotating-axis individuals. (b) Framework design of the rotation alignment software. The blue color indicates the rotation alignment algorithm and its associated functional modules, and the orange color indicates the GUI module. J. Synchrotron Rad. (2023). 30, 169\u2013178 Zhen Zhang et al. (cid:2) Automatic synchrotron tomographic alignment schemes 173 research papers 0(cid:3) to 180(cid:3) to \ufb01nd the projection angle !1 where the sample was completely rotated back into the FoV and the angle !2 where the center of the sample reached the center of the detector. After that, we obtained the distance between the sample center and the detector center at the !1 angle and denoted this distance as distance_ !1. Among them, the offsets of the two motors can be expressed as Here, according to the relationship of the offset and the reference angles, we can obtain offset_ x and offset_ z by equations (5) and (6), offset x \u2019 distance !1 sin\u00f0!1\u00de (cid:4) cos\u00f0!1\u00de tan\u00f0!2\u00de ; offset z \u2019 (cid:4)offset x tan\u00f0!2\u00de: tan !2\u00f0 \u00de \u2019 (cid:4) offset x offset z : Meanwhile, distance_ !1 can be expressed as the superposition of two offsets at angle !1, distance !1 \u00bc offset x sin\u00f0!1\u00de \u00fe offset z cos\u00f0!1\u00de: \u00f03\u00de \u00f04\u00de The sample was then moved according to the calculated offset_ x and offset_ z for the coarse alignment. Following the coarse alignment, a \ufb01ne alignment process triggered by genetic algorithm is required for further alignment work as shown in Fig. 5. Based on genetic algorithm, we use movement"}, {"question": " How is the adjustment angle of the axis of rotation roughly calculated in the physical model of the rotary axis coarse alignment?", "answer": " From the coordinates of the four feature points", "ref_chunk": "171 research papers Figure 2 (a) Sample positioning stage. Motor x and motor z control the movement of the sample, the rotation motor controls the rotation of the sample, and motor (cid:3) and motor (cid:4) control the tilt of the rotation axis. (b) Rotary-axis tilt model. The tilt angle of the axis of rotation can be split into the superposition of two orthogonal vectors. (c) Physical model of the rotary axis coarse alignment. The adjustment angle of the axis of rotation is roughly calculated from the coordinates of the four feature points. alignment scenario, the staff usually use a needle or other standard sample with one strong absorbing particle. There- fore, temporarily, here we only extract and track one strong absorbing particle of the walnut sample, which can be easily \ufb01ltered out by setting a higher grayscale threshold to obtain its motion trajectory. Ideally, the trajectory of the particle will form a straight line after one turn of rotation without any tilt ((cid:2)Xt = 0, (cid:2)Zt = 0). As shown in Fig. 3, when (cid:2)Xt = 0 and (cid:2)Zt 6\u00bc 0, the trajectory of the particle turns out to be an ellipse. When 6\u00bc 0 and (cid:2)Zt = 0, the trajectory of the particle forms a (cid:2)Xt straight line at a certain angle to the horizontal direction, with its two endpoints collected from projection angles 90(cid:3) and 270(cid:3). When (cid:2)Xt 6\u00bc 0 and (cid:2)Zt 6\u00bc 0, the trajectory of the particle will be a tilted ellipse, from which (cid:2)Xt and (cid:2)Zt can be calculated as (cid:2)Xt \u00bc arctan (cid:2) y1 (cid:4) y2 x1 (cid:4) x2 (cid:3) 180 (cid:5) ; (cid:2)Zt \u00bc arcsin ( (cid:4) \u00f0 \u00f0 x3 (cid:4) x4 x1 (cid:4) x2 \u00de2 \u00fe y3 (cid:4) y4 \u00f0 \u00de2 \u00fe y1 (cid:4) y2 \u00f0 \u00de2 \u00de2 (cid:5)1=2 ) 180 (cid:5) ; Figure 3 Particle trajectories under different rotation-axis misalignment situations. 172 Zhen Zhang et al. (cid:2) Automatic synchrotron tomographic alignment schemes J. Synchrotron Rad. (2023). 30, 169\u2013178 \u00f01\u00de \u00f02\u00de research papers where x1, x2, x3 and x4 are the horizontal coordinate values of P1, P2, P3 and P4, and y1, y2, y3 and y4 are the vertical coor- dinates values of P1, P2, P3 and P4, respectively. P1 and P2 are the vertices of the major axis of the ellipse \ufb01tted to the trajectory of the feature particle, while P3 and P4 are the two points on the ellipse with the same x-coordinate of the midpoint of the minor axis. A two-step alignment procedure is introduced for the rotation-axis alignment: coarse alignment and \ufb01ne alignment, as shown in Fig. 4. For the coarse alignment, the tilt angles of motor (cid:3) and motor (cid:4) are corrected by equations (1) and (2). For the \ufb01ne alignment of the rotation axis based on the GA, a series of individuals of random rotation-axis positions (motor (cid:3) and motor (cid:4)) are generated to form the initial population around the coarsely aligned rotation-axis position. The population \ufb01tness is assessed according to the trajectory characteristics of the strong absorbing particle. After several rounds of selection, crossover and mutation, the population \ufb01nally reaches convergence and obtains the optimum adjust- ment angles. To avoid repetition in data acquisition, the trajectory information of new individuals in the previous generations will be stored for the new iteration. Typically, we set two adjustment accuracy modes to accommodate different adjustment needs: (a) 15 population iterations for a popula- tion of 20 individuals and (b) 15 population iterations for a population of 30 individuals. The number of population iterations and individuals are application-scenario-dependent input parameters for the alignment program. The program can also be terminated early by human intervention if the popu- lation has converged. 2.3. Sample alignment To simulate the projection images for a misaligned sample with respect to the rotation axis, an offset was applied on the sample. In the virtual experiment, this offset is a combination of the offsets of the two sample motors (motor x and motor z), which we denote as offset_ x and offset_ z. The physical model for the coarse alignment is shown in Fig. S1 of the supporting information. During the coarse alignment of the sample, \ufb01rstly we performed one coarse tomography scan and checked whether the sample was within the \ufb01eld of view (FoV) of the detector for all projections. If the sample was falling out of the FoV at certain projections, another scan was performed from Figure 4 (a) The process of \ufb01ne alignment of the rotation axis. Genetic-algorithm-based selection, crossover, mutation and inheritance processes for rotating-axis individuals. (b) Framework design of the rotation alignment software. The blue color indicates the rotation alignment algorithm and its associated functional modules, and the orange color indicates the GUI module. J. Synchrotron Rad. (2023). 30, 169\u2013178 Zhen Zhang et al. (cid:2) Automatic synchrotron tomographic alignment schemes 173 research papers 0(cid:3) to 180(cid:3) to \ufb01nd the projection angle !1 where the sample was completely rotated back into the FoV and the angle !2 where the center of the sample reached the center of the detector. After that, we obtained the distance between the sample center and the detector center at the !1 angle and denoted this distance as distance_ !1. Among them, the offsets of the two motors can be expressed as Here, according to the relationship of the offset and the reference angles, we can obtain offset_ x and offset_ z by equations (5) and (6), offset x \u2019 distance !1 sin\u00f0!1\u00de (cid:4) cos\u00f0!1\u00de tan\u00f0!2\u00de ; offset z \u2019 (cid:4)offset x tan\u00f0!2\u00de: tan !2\u00f0 \u00de \u2019 (cid:4) offset x offset z : Meanwhile, distance_ !1 can be expressed as the superposition of two offsets at angle !1, distance !1 \u00bc offset x sin\u00f0!1\u00de \u00fe offset z cos\u00f0!1\u00de: \u00f03\u00de \u00f04\u00de The sample was then moved according to the calculated offset_ x and offset_ z for the coarse alignment. Following the coarse alignment, a \ufb01ne alignment process triggered by genetic algorithm is required for further alignment work as shown in Fig. 5. Based on genetic algorithm, we use movement"}, {"question": " What type of trajectory does the particle form when (cid:2)Xt = 0 and (cid:2)Zt 6\u00bc 0?", "answer": " An ellipse", "ref_chunk": "171 research papers Figure 2 (a) Sample positioning stage. Motor x and motor z control the movement of the sample, the rotation motor controls the rotation of the sample, and motor (cid:3) and motor (cid:4) control the tilt of the rotation axis. (b) Rotary-axis tilt model. The tilt angle of the axis of rotation can be split into the superposition of two orthogonal vectors. (c) Physical model of the rotary axis coarse alignment. The adjustment angle of the axis of rotation is roughly calculated from the coordinates of the four feature points. alignment scenario, the staff usually use a needle or other standard sample with one strong absorbing particle. There- fore, temporarily, here we only extract and track one strong absorbing particle of the walnut sample, which can be easily \ufb01ltered out by setting a higher grayscale threshold to obtain its motion trajectory. Ideally, the trajectory of the particle will form a straight line after one turn of rotation without any tilt ((cid:2)Xt = 0, (cid:2)Zt = 0). As shown in Fig. 3, when (cid:2)Xt = 0 and (cid:2)Zt 6\u00bc 0, the trajectory of the particle turns out to be an ellipse. When 6\u00bc 0 and (cid:2)Zt = 0, the trajectory of the particle forms a (cid:2)Xt straight line at a certain angle to the horizontal direction, with its two endpoints collected from projection angles 90(cid:3) and 270(cid:3). When (cid:2)Xt 6\u00bc 0 and (cid:2)Zt 6\u00bc 0, the trajectory of the particle will be a tilted ellipse, from which (cid:2)Xt and (cid:2)Zt can be calculated as (cid:2)Xt \u00bc arctan (cid:2) y1 (cid:4) y2 x1 (cid:4) x2 (cid:3) 180 (cid:5) ; (cid:2)Zt \u00bc arcsin ( (cid:4) \u00f0 \u00f0 x3 (cid:4) x4 x1 (cid:4) x2 \u00de2 \u00fe y3 (cid:4) y4 \u00f0 \u00de2 \u00fe y1 (cid:4) y2 \u00f0 \u00de2 \u00de2 (cid:5)1=2 ) 180 (cid:5) ; Figure 3 Particle trajectories under different rotation-axis misalignment situations. 172 Zhen Zhang et al. (cid:2) Automatic synchrotron tomographic alignment schemes J. Synchrotron Rad. (2023). 30, 169\u2013178 \u00f01\u00de \u00f02\u00de research papers where x1, x2, x3 and x4 are the horizontal coordinate values of P1, P2, P3 and P4, and y1, y2, y3 and y4 are the vertical coor- dinates values of P1, P2, P3 and P4, respectively. P1 and P2 are the vertices of the major axis of the ellipse \ufb01tted to the trajectory of the feature particle, while P3 and P4 are the two points on the ellipse with the same x-coordinate of the midpoint of the minor axis. A two-step alignment procedure is introduced for the rotation-axis alignment: coarse alignment and \ufb01ne alignment, as shown in Fig. 4. For the coarse alignment, the tilt angles of motor (cid:3) and motor (cid:4) are corrected by equations (1) and (2). For the \ufb01ne alignment of the rotation axis based on the GA, a series of individuals of random rotation-axis positions (motor (cid:3) and motor (cid:4)) are generated to form the initial population around the coarsely aligned rotation-axis position. The population \ufb01tness is assessed according to the trajectory characteristics of the strong absorbing particle. After several rounds of selection, crossover and mutation, the population \ufb01nally reaches convergence and obtains the optimum adjust- ment angles. To avoid repetition in data acquisition, the trajectory information of new individuals in the previous generations will be stored for the new iteration. Typically, we set two adjustment accuracy modes to accommodate different adjustment needs: (a) 15 population iterations for a popula- tion of 20 individuals and (b) 15 population iterations for a population of 30 individuals. The number of population iterations and individuals are application-scenario-dependent input parameters for the alignment program. The program can also be terminated early by human intervention if the popu- lation has converged. 2.3. Sample alignment To simulate the projection images for a misaligned sample with respect to the rotation axis, an offset was applied on the sample. In the virtual experiment, this offset is a combination of the offsets of the two sample motors (motor x and motor z), which we denote as offset_ x and offset_ z. The physical model for the coarse alignment is shown in Fig. S1 of the supporting information. During the coarse alignment of the sample, \ufb01rstly we performed one coarse tomography scan and checked whether the sample was within the \ufb01eld of view (FoV) of the detector for all projections. If the sample was falling out of the FoV at certain projections, another scan was performed from Figure 4 (a) The process of \ufb01ne alignment of the rotation axis. Genetic-algorithm-based selection, crossover, mutation and inheritance processes for rotating-axis individuals. (b) Framework design of the rotation alignment software. The blue color indicates the rotation alignment algorithm and its associated functional modules, and the orange color indicates the GUI module. J. Synchrotron Rad. (2023). 30, 169\u2013178 Zhen Zhang et al. (cid:2) Automatic synchrotron tomographic alignment schemes 173 research papers 0(cid:3) to 180(cid:3) to \ufb01nd the projection angle !1 where the sample was completely rotated back into the FoV and the angle !2 where the center of the sample reached the center of the detector. After that, we obtained the distance between the sample center and the detector center at the !1 angle and denoted this distance as distance_ !1. Among them, the offsets of the two motors can be expressed as Here, according to the relationship of the offset and the reference angles, we can obtain offset_ x and offset_ z by equations (5) and (6), offset x \u2019 distance !1 sin\u00f0!1\u00de (cid:4) cos\u00f0!1\u00de tan\u00f0!2\u00de ; offset z \u2019 (cid:4)offset x tan\u00f0!2\u00de: tan !2\u00f0 \u00de \u2019 (cid:4) offset x offset z : Meanwhile, distance_ !1 can be expressed as the superposition of two offsets at angle !1, distance !1 \u00bc offset x sin\u00f0!1\u00de \u00fe offset z cos\u00f0!1\u00de: \u00f03\u00de \u00f04\u00de The sample was then moved according to the calculated offset_ x and offset_ z for the coarse alignment. Following the coarse alignment, a \ufb01ne alignment process triggered by genetic algorithm is required for further alignment work as shown in Fig. 5. Based on genetic algorithm, we use movement"}, {"question": " What is the purpose of the two-step alignment procedure introduced for the rotation-axis alignment?", "answer": " Coarse alignment and fine alignment", "ref_chunk": "171 research papers Figure 2 (a) Sample positioning stage. Motor x and motor z control the movement of the sample, the rotation motor controls the rotation of the sample, and motor (cid:3) and motor (cid:4) control the tilt of the rotation axis. (b) Rotary-axis tilt model. The tilt angle of the axis of rotation can be split into the superposition of two orthogonal vectors. (c) Physical model of the rotary axis coarse alignment. The adjustment angle of the axis of rotation is roughly calculated from the coordinates of the four feature points. alignment scenario, the staff usually use a needle or other standard sample with one strong absorbing particle. There- fore, temporarily, here we only extract and track one strong absorbing particle of the walnut sample, which can be easily \ufb01ltered out by setting a higher grayscale threshold to obtain its motion trajectory. Ideally, the trajectory of the particle will form a straight line after one turn of rotation without any tilt ((cid:2)Xt = 0, (cid:2)Zt = 0). As shown in Fig. 3, when (cid:2)Xt = 0 and (cid:2)Zt 6\u00bc 0, the trajectory of the particle turns out to be an ellipse. When 6\u00bc 0 and (cid:2)Zt = 0, the trajectory of the particle forms a (cid:2)Xt straight line at a certain angle to the horizontal direction, with its two endpoints collected from projection angles 90(cid:3) and 270(cid:3). When (cid:2)Xt 6\u00bc 0 and (cid:2)Zt 6\u00bc 0, the trajectory of the particle will be a tilted ellipse, from which (cid:2)Xt and (cid:2)Zt can be calculated as (cid:2)Xt \u00bc arctan (cid:2) y1 (cid:4) y2 x1 (cid:4) x2 (cid:3) 180 (cid:5) ; (cid:2)Zt \u00bc arcsin ( (cid:4) \u00f0 \u00f0 x3 (cid:4) x4 x1 (cid:4) x2 \u00de2 \u00fe y3 (cid:4) y4 \u00f0 \u00de2 \u00fe y1 (cid:4) y2 \u00f0 \u00de2 \u00de2 (cid:5)1=2 ) 180 (cid:5) ; Figure 3 Particle trajectories under different rotation-axis misalignment situations. 172 Zhen Zhang et al. (cid:2) Automatic synchrotron tomographic alignment schemes J. Synchrotron Rad. (2023). 30, 169\u2013178 \u00f01\u00de \u00f02\u00de research papers where x1, x2, x3 and x4 are the horizontal coordinate values of P1, P2, P3 and P4, and y1, y2, y3 and y4 are the vertical coor- dinates values of P1, P2, P3 and P4, respectively. P1 and P2 are the vertices of the major axis of the ellipse \ufb01tted to the trajectory of the feature particle, while P3 and P4 are the two points on the ellipse with the same x-coordinate of the midpoint of the minor axis. A two-step alignment procedure is introduced for the rotation-axis alignment: coarse alignment and \ufb01ne alignment, as shown in Fig. 4. For the coarse alignment, the tilt angles of motor (cid:3) and motor (cid:4) are corrected by equations (1) and (2). For the \ufb01ne alignment of the rotation axis based on the GA, a series of individuals of random rotation-axis positions (motor (cid:3) and motor (cid:4)) are generated to form the initial population around the coarsely aligned rotation-axis position. The population \ufb01tness is assessed according to the trajectory characteristics of the strong absorbing particle. After several rounds of selection, crossover and mutation, the population \ufb01nally reaches convergence and obtains the optimum adjust- ment angles. To avoid repetition in data acquisition, the trajectory information of new individuals in the previous generations will be stored for the new iteration. Typically, we set two adjustment accuracy modes to accommodate different adjustment needs: (a) 15 population iterations for a popula- tion of 20 individuals and (b) 15 population iterations for a population of 30 individuals. The number of population iterations and individuals are application-scenario-dependent input parameters for the alignment program. The program can also be terminated early by human intervention if the popu- lation has converged. 2.3. Sample alignment To simulate the projection images for a misaligned sample with respect to the rotation axis, an offset was applied on the sample. In the virtual experiment, this offset is a combination of the offsets of the two sample motors (motor x and motor z), which we denote as offset_ x and offset_ z. The physical model for the coarse alignment is shown in Fig. S1 of the supporting information. During the coarse alignment of the sample, \ufb01rstly we performed one coarse tomography scan and checked whether the sample was within the \ufb01eld of view (FoV) of the detector for all projections. If the sample was falling out of the FoV at certain projections, another scan was performed from Figure 4 (a) The process of \ufb01ne alignment of the rotation axis. Genetic-algorithm-based selection, crossover, mutation and inheritance processes for rotating-axis individuals. (b) Framework design of the rotation alignment software. The blue color indicates the rotation alignment algorithm and its associated functional modules, and the orange color indicates the GUI module. J. Synchrotron Rad. (2023). 30, 169\u2013178 Zhen Zhang et al. (cid:2) Automatic synchrotron tomographic alignment schemes 173 research papers 0(cid:3) to 180(cid:3) to \ufb01nd the projection angle !1 where the sample was completely rotated back into the FoV and the angle !2 where the center of the sample reached the center of the detector. After that, we obtained the distance between the sample center and the detector center at the !1 angle and denoted this distance as distance_ !1. Among them, the offsets of the two motors can be expressed as Here, according to the relationship of the offset and the reference angles, we can obtain offset_ x and offset_ z by equations (5) and (6), offset x \u2019 distance !1 sin\u00f0!1\u00de (cid:4) cos\u00f0!1\u00de tan\u00f0!2\u00de ; offset z \u2019 (cid:4)offset x tan\u00f0!2\u00de: tan !2\u00f0 \u00de \u2019 (cid:4) offset x offset z : Meanwhile, distance_ !1 can be expressed as the superposition of two offsets at angle !1, distance !1 \u00bc offset x sin\u00f0!1\u00de \u00fe offset z cos\u00f0!1\u00de: \u00f03\u00de \u00f04\u00de The sample was then moved according to the calculated offset_ x and offset_ z for the coarse alignment. Following the coarse alignment, a \ufb01ne alignment process triggered by genetic algorithm is required for further alignment work as shown in Fig. 5. Based on genetic algorithm, we use movement"}, {"question": " What is used to assess the population fitness in fine alignment based on the GA?", "answer": " The trajectory characteristics of the strong absorbing particle", "ref_chunk": "171 research papers Figure 2 (a) Sample positioning stage. Motor x and motor z control the movement of the sample, the rotation motor controls the rotation of the sample, and motor (cid:3) and motor (cid:4) control the tilt of the rotation axis. (b) Rotary-axis tilt model. The tilt angle of the axis of rotation can be split into the superposition of two orthogonal vectors. (c) Physical model of the rotary axis coarse alignment. The adjustment angle of the axis of rotation is roughly calculated from the coordinates of the four feature points. alignment scenario, the staff usually use a needle or other standard sample with one strong absorbing particle. There- fore, temporarily, here we only extract and track one strong absorbing particle of the walnut sample, which can be easily \ufb01ltered out by setting a higher grayscale threshold to obtain its motion trajectory. Ideally, the trajectory of the particle will form a straight line after one turn of rotation without any tilt ((cid:2)Xt = 0, (cid:2)Zt = 0). As shown in Fig. 3, when (cid:2)Xt = 0 and (cid:2)Zt 6\u00bc 0, the trajectory of the particle turns out to be an ellipse. When 6\u00bc 0 and (cid:2)Zt = 0, the trajectory of the particle forms a (cid:2)Xt straight line at a certain angle to the horizontal direction, with its two endpoints collected from projection angles 90(cid:3) and 270(cid:3). When (cid:2)Xt 6\u00bc 0 and (cid:2)Zt 6\u00bc 0, the trajectory of the particle will be a tilted ellipse, from which (cid:2)Xt and (cid:2)Zt can be calculated as (cid:2)Xt \u00bc arctan (cid:2) y1 (cid:4) y2 x1 (cid:4) x2 (cid:3) 180 (cid:5) ; (cid:2)Zt \u00bc arcsin ( (cid:4) \u00f0 \u00f0 x3 (cid:4) x4 x1 (cid:4) x2 \u00de2 \u00fe y3 (cid:4) y4 \u00f0 \u00de2 \u00fe y1 (cid:4) y2 \u00f0 \u00de2 \u00de2 (cid:5)1=2 ) 180 (cid:5) ; Figure 3 Particle trajectories under different rotation-axis misalignment situations. 172 Zhen Zhang et al. (cid:2) Automatic synchrotron tomographic alignment schemes J. Synchrotron Rad. (2023). 30, 169\u2013178 \u00f01\u00de \u00f02\u00de research papers where x1, x2, x3 and x4 are the horizontal coordinate values of P1, P2, P3 and P4, and y1, y2, y3 and y4 are the vertical coor- dinates values of P1, P2, P3 and P4, respectively. P1 and P2 are the vertices of the major axis of the ellipse \ufb01tted to the trajectory of the feature particle, while P3 and P4 are the two points on the ellipse with the same x-coordinate of the midpoint of the minor axis. A two-step alignment procedure is introduced for the rotation-axis alignment: coarse alignment and \ufb01ne alignment, as shown in Fig. 4. For the coarse alignment, the tilt angles of motor (cid:3) and motor (cid:4) are corrected by equations (1) and (2). For the \ufb01ne alignment of the rotation axis based on the GA, a series of individuals of random rotation-axis positions (motor (cid:3) and motor (cid:4)) are generated to form the initial population around the coarsely aligned rotation-axis position. The population \ufb01tness is assessed according to the trajectory characteristics of the strong absorbing particle. After several rounds of selection, crossover and mutation, the population \ufb01nally reaches convergence and obtains the optimum adjust- ment angles. To avoid repetition in data acquisition, the trajectory information of new individuals in the previous generations will be stored for the new iteration. Typically, we set two adjustment accuracy modes to accommodate different adjustment needs: (a) 15 population iterations for a popula- tion of 20 individuals and (b) 15 population iterations for a population of 30 individuals. The number of population iterations and individuals are application-scenario-dependent input parameters for the alignment program. The program can also be terminated early by human intervention if the popu- lation has converged. 2.3. Sample alignment To simulate the projection images for a misaligned sample with respect to the rotation axis, an offset was applied on the sample. In the virtual experiment, this offset is a combination of the offsets of the two sample motors (motor x and motor z), which we denote as offset_ x and offset_ z. The physical model for the coarse alignment is shown in Fig. S1 of the supporting information. During the coarse alignment of the sample, \ufb01rstly we performed one coarse tomography scan and checked whether the sample was within the \ufb01eld of view (FoV) of the detector for all projections. If the sample was falling out of the FoV at certain projections, another scan was performed from Figure 4 (a) The process of \ufb01ne alignment of the rotation axis. Genetic-algorithm-based selection, crossover, mutation and inheritance processes for rotating-axis individuals. (b) Framework design of the rotation alignment software. The blue color indicates the rotation alignment algorithm and its associated functional modules, and the orange color indicates the GUI module. J. Synchrotron Rad. (2023). 30, 169\u2013178 Zhen Zhang et al. (cid:2) Automatic synchrotron tomographic alignment schemes 173 research papers 0(cid:3) to 180(cid:3) to \ufb01nd the projection angle !1 where the sample was completely rotated back into the FoV and the angle !2 where the center of the sample reached the center of the detector. After that, we obtained the distance between the sample center and the detector center at the !1 angle and denoted this distance as distance_ !1. Among them, the offsets of the two motors can be expressed as Here, according to the relationship of the offset and the reference angles, we can obtain offset_ x and offset_ z by equations (5) and (6), offset x \u2019 distance !1 sin\u00f0!1\u00de (cid:4) cos\u00f0!1\u00de tan\u00f0!2\u00de ; offset z \u2019 (cid:4)offset x tan\u00f0!2\u00de: tan !2\u00f0 \u00de \u2019 (cid:4) offset x offset z : Meanwhile, distance_ !1 can be expressed as the superposition of two offsets at angle !1, distance !1 \u00bc offset x sin\u00f0!1\u00de \u00fe offset z cos\u00f0!1\u00de: \u00f03\u00de \u00f04\u00de The sample was then moved according to the calculated offset_ x and offset_ z for the coarse alignment. Following the coarse alignment, a \ufb01ne alignment process triggered by genetic algorithm is required for further alignment work as shown in Fig. 5. Based on genetic algorithm, we use movement"}, {"question": " How is the offset in the physical model for the coarse alignment expressed?", "answer": " Offset x \u2019 distance !1 sin\u00f0!1\u00de (cid:4) cos\u00f0!1\u00de tan\u00f0!2\u00de ; offset z \u2019 (cid:4)offset x tan\u00f0!2\u00de", "ref_chunk": "171 research papers Figure 2 (a) Sample positioning stage. Motor x and motor z control the movement of the sample, the rotation motor controls the rotation of the sample, and motor (cid:3) and motor (cid:4) control the tilt of the rotation axis. (b) Rotary-axis tilt model. The tilt angle of the axis of rotation can be split into the superposition of two orthogonal vectors. (c) Physical model of the rotary axis coarse alignment. The adjustment angle of the axis of rotation is roughly calculated from the coordinates of the four feature points. alignment scenario, the staff usually use a needle or other standard sample with one strong absorbing particle. There- fore, temporarily, here we only extract and track one strong absorbing particle of the walnut sample, which can be easily \ufb01ltered out by setting a higher grayscale threshold to obtain its motion trajectory. Ideally, the trajectory of the particle will form a straight line after one turn of rotation without any tilt ((cid:2)Xt = 0, (cid:2)Zt = 0). As shown in Fig. 3, when (cid:2)Xt = 0 and (cid:2)Zt 6\u00bc 0, the trajectory of the particle turns out to be an ellipse. When 6\u00bc 0 and (cid:2)Zt = 0, the trajectory of the particle forms a (cid:2)Xt straight line at a certain angle to the horizontal direction, with its two endpoints collected from projection angles 90(cid:3) and 270(cid:3). When (cid:2)Xt 6\u00bc 0 and (cid:2)Zt 6\u00bc 0, the trajectory of the particle will be a tilted ellipse, from which (cid:2)Xt and (cid:2)Zt can be calculated as (cid:2)Xt \u00bc arctan (cid:2) y1 (cid:4) y2 x1 (cid:4) x2 (cid:3) 180 (cid:5) ; (cid:2)Zt \u00bc arcsin ( (cid:4) \u00f0 \u00f0 x3 (cid:4) x4 x1 (cid:4) x2 \u00de2 \u00fe y3 (cid:4) y4 \u00f0 \u00de2 \u00fe y1 (cid:4) y2 \u00f0 \u00de2 \u00de2 (cid:5)1=2 ) 180 (cid:5) ; Figure 3 Particle trajectories under different rotation-axis misalignment situations. 172 Zhen Zhang et al. (cid:2) Automatic synchrotron tomographic alignment schemes J. Synchrotron Rad. (2023). 30, 169\u2013178 \u00f01\u00de \u00f02\u00de research papers where x1, x2, x3 and x4 are the horizontal coordinate values of P1, P2, P3 and P4, and y1, y2, y3 and y4 are the vertical coor- dinates values of P1, P2, P3 and P4, respectively. P1 and P2 are the vertices of the major axis of the ellipse \ufb01tted to the trajectory of the feature particle, while P3 and P4 are the two points on the ellipse with the same x-coordinate of the midpoint of the minor axis. A two-step alignment procedure is introduced for the rotation-axis alignment: coarse alignment and \ufb01ne alignment, as shown in Fig. 4. For the coarse alignment, the tilt angles of motor (cid:3) and motor (cid:4) are corrected by equations (1) and (2). For the \ufb01ne alignment of the rotation axis based on the GA, a series of individuals of random rotation-axis positions (motor (cid:3) and motor (cid:4)) are generated to form the initial population around the coarsely aligned rotation-axis position. The population \ufb01tness is assessed according to the trajectory characteristics of the strong absorbing particle. After several rounds of selection, crossover and mutation, the population \ufb01nally reaches convergence and obtains the optimum adjust- ment angles. To avoid repetition in data acquisition, the trajectory information of new individuals in the previous generations will be stored for the new iteration. Typically, we set two adjustment accuracy modes to accommodate different adjustment needs: (a) 15 population iterations for a popula- tion of 20 individuals and (b) 15 population iterations for a population of 30 individuals. The number of population iterations and individuals are application-scenario-dependent input parameters for the alignment program. The program can also be terminated early by human intervention if the popu- lation has converged. 2.3. Sample alignment To simulate the projection images for a misaligned sample with respect to the rotation axis, an offset was applied on the sample. In the virtual experiment, this offset is a combination of the offsets of the two sample motors (motor x and motor z), which we denote as offset_ x and offset_ z. The physical model for the coarse alignment is shown in Fig. S1 of the supporting information. During the coarse alignment of the sample, \ufb01rstly we performed one coarse tomography scan and checked whether the sample was within the \ufb01eld of view (FoV) of the detector for all projections. If the sample was falling out of the FoV at certain projections, another scan was performed from Figure 4 (a) The process of \ufb01ne alignment of the rotation axis. Genetic-algorithm-based selection, crossover, mutation and inheritance processes for rotating-axis individuals. (b) Framework design of the rotation alignment software. The blue color indicates the rotation alignment algorithm and its associated functional modules, and the orange color indicates the GUI module. J. Synchrotron Rad. (2023). 30, 169\u2013178 Zhen Zhang et al. (cid:2) Automatic synchrotron tomographic alignment schemes 173 research papers 0(cid:3) to 180(cid:3) to \ufb01nd the projection angle !1 where the sample was completely rotated back into the FoV and the angle !2 where the center of the sample reached the center of the detector. After that, we obtained the distance between the sample center and the detector center at the !1 angle and denoted this distance as distance_ !1. Among them, the offsets of the two motors can be expressed as Here, according to the relationship of the offset and the reference angles, we can obtain offset_ x and offset_ z by equations (5) and (6), offset x \u2019 distance !1 sin\u00f0!1\u00de (cid:4) cos\u00f0!1\u00de tan\u00f0!2\u00de ; offset z \u2019 (cid:4)offset x tan\u00f0!2\u00de: tan !2\u00f0 \u00de \u2019 (cid:4) offset x offset z : Meanwhile, distance_ !1 can be expressed as the superposition of two offsets at angle !1, distance !1 \u00bc offset x sin\u00f0!1\u00de \u00fe offset z cos\u00f0!1\u00de: \u00f03\u00de \u00f04\u00de The sample was then moved according to the calculated offset_ x and offset_ z for the coarse alignment. Following the coarse alignment, a \ufb01ne alignment process triggered by genetic algorithm is required for further alignment work as shown in Fig. 5. Based on genetic algorithm, we use movement"}, {"question": " What is denoted as distance_ !1 in the text?", "answer": " The distance between the sample center and the detector center at the !1 angle", "ref_chunk": "171 research papers Figure 2 (a) Sample positioning stage. Motor x and motor z control the movement of the sample, the rotation motor controls the rotation of the sample, and motor (cid:3) and motor (cid:4) control the tilt of the rotation axis. (b) Rotary-axis tilt model. The tilt angle of the axis of rotation can be split into the superposition of two orthogonal vectors. (c) Physical model of the rotary axis coarse alignment. The adjustment angle of the axis of rotation is roughly calculated from the coordinates of the four feature points. alignment scenario, the staff usually use a needle or other standard sample with one strong absorbing particle. There- fore, temporarily, here we only extract and track one strong absorbing particle of the walnut sample, which can be easily \ufb01ltered out by setting a higher grayscale threshold to obtain its motion trajectory. Ideally, the trajectory of the particle will form a straight line after one turn of rotation without any tilt ((cid:2)Xt = 0, (cid:2)Zt = 0). As shown in Fig. 3, when (cid:2)Xt = 0 and (cid:2)Zt 6\u00bc 0, the trajectory of the particle turns out to be an ellipse. When 6\u00bc 0 and (cid:2)Zt = 0, the trajectory of the particle forms a (cid:2)Xt straight line at a certain angle to the horizontal direction, with its two endpoints collected from projection angles 90(cid:3) and 270(cid:3). When (cid:2)Xt 6\u00bc 0 and (cid:2)Zt 6\u00bc 0, the trajectory of the particle will be a tilted ellipse, from which (cid:2)Xt and (cid:2)Zt can be calculated as (cid:2)Xt \u00bc arctan (cid:2) y1 (cid:4) y2 x1 (cid:4) x2 (cid:3) 180 (cid:5) ; (cid:2)Zt \u00bc arcsin ( (cid:4) \u00f0 \u00f0 x3 (cid:4) x4 x1 (cid:4) x2 \u00de2 \u00fe y3 (cid:4) y4 \u00f0 \u00de2 \u00fe y1 (cid:4) y2 \u00f0 \u00de2 \u00de2 (cid:5)1=2 ) 180 (cid:5) ; Figure 3 Particle trajectories under different rotation-axis misalignment situations. 172 Zhen Zhang et al. (cid:2) Automatic synchrotron tomographic alignment schemes J. Synchrotron Rad. (2023). 30, 169\u2013178 \u00f01\u00de \u00f02\u00de research papers where x1, x2, x3 and x4 are the horizontal coordinate values of P1, P2, P3 and P4, and y1, y2, y3 and y4 are the vertical coor- dinates values of P1, P2, P3 and P4, respectively. P1 and P2 are the vertices of the major axis of the ellipse \ufb01tted to the trajectory of the feature particle, while P3 and P4 are the two points on the ellipse with the same x-coordinate of the midpoint of the minor axis. A two-step alignment procedure is introduced for the rotation-axis alignment: coarse alignment and \ufb01ne alignment, as shown in Fig. 4. For the coarse alignment, the tilt angles of motor (cid:3) and motor (cid:4) are corrected by equations (1) and (2). For the \ufb01ne alignment of the rotation axis based on the GA, a series of individuals of random rotation-axis positions (motor (cid:3) and motor (cid:4)) are generated to form the initial population around the coarsely aligned rotation-axis position. The population \ufb01tness is assessed according to the trajectory characteristics of the strong absorbing particle. After several rounds of selection, crossover and mutation, the population \ufb01nally reaches convergence and obtains the optimum adjust- ment angles. To avoid repetition in data acquisition, the trajectory information of new individuals in the previous generations will be stored for the new iteration. Typically, we set two adjustment accuracy modes to accommodate different adjustment needs: (a) 15 population iterations for a popula- tion of 20 individuals and (b) 15 population iterations for a population of 30 individuals. The number of population iterations and individuals are application-scenario-dependent input parameters for the alignment program. The program can also be terminated early by human intervention if the popu- lation has converged. 2.3. Sample alignment To simulate the projection images for a misaligned sample with respect to the rotation axis, an offset was applied on the sample. In the virtual experiment, this offset is a combination of the offsets of the two sample motors (motor x and motor z), which we denote as offset_ x and offset_ z. The physical model for the coarse alignment is shown in Fig. S1 of the supporting information. During the coarse alignment of the sample, \ufb01rstly we performed one coarse tomography scan and checked whether the sample was within the \ufb01eld of view (FoV) of the detector for all projections. If the sample was falling out of the FoV at certain projections, another scan was performed from Figure 4 (a) The process of \ufb01ne alignment of the rotation axis. Genetic-algorithm-based selection, crossover, mutation and inheritance processes for rotating-axis individuals. (b) Framework design of the rotation alignment software. The blue color indicates the rotation alignment algorithm and its associated functional modules, and the orange color indicates the GUI module. J. Synchrotron Rad. (2023). 30, 169\u2013178 Zhen Zhang et al. (cid:2) Automatic synchrotron tomographic alignment schemes 173 research papers 0(cid:3) to 180(cid:3) to \ufb01nd the projection angle !1 where the sample was completely rotated back into the FoV and the angle !2 where the center of the sample reached the center of the detector. After that, we obtained the distance between the sample center and the detector center at the !1 angle and denoted this distance as distance_ !1. Among them, the offsets of the two motors can be expressed as Here, according to the relationship of the offset and the reference angles, we can obtain offset_ x and offset_ z by equations (5) and (6), offset x \u2019 distance !1 sin\u00f0!1\u00de (cid:4) cos\u00f0!1\u00de tan\u00f0!2\u00de ; offset z \u2019 (cid:4)offset x tan\u00f0!2\u00de: tan !2\u00f0 \u00de \u2019 (cid:4) offset x offset z : Meanwhile, distance_ !1 can be expressed as the superposition of two offsets at angle !1, distance !1 \u00bc offset x sin\u00f0!1\u00de \u00fe offset z cos\u00f0!1\u00de: \u00f03\u00de \u00f04\u00de The sample was then moved according to the calculated offset_ x and offset_ z for the coarse alignment. Following the coarse alignment, a \ufb01ne alignment process triggered by genetic algorithm is required for further alignment work as shown in Fig. 5. Based on genetic algorithm, we use movement"}, {"question": " What triggers the fine alignment process after the coarse alignment in the sample alignment procedure?", "answer": " Genetic algorithm", "ref_chunk": "171 research papers Figure 2 (a) Sample positioning stage. Motor x and motor z control the movement of the sample, the rotation motor controls the rotation of the sample, and motor (cid:3) and motor (cid:4) control the tilt of the rotation axis. (b) Rotary-axis tilt model. The tilt angle of the axis of rotation can be split into the superposition of two orthogonal vectors. (c) Physical model of the rotary axis coarse alignment. The adjustment angle of the axis of rotation is roughly calculated from the coordinates of the four feature points. alignment scenario, the staff usually use a needle or other standard sample with one strong absorbing particle. There- fore, temporarily, here we only extract and track one strong absorbing particle of the walnut sample, which can be easily \ufb01ltered out by setting a higher grayscale threshold to obtain its motion trajectory. Ideally, the trajectory of the particle will form a straight line after one turn of rotation without any tilt ((cid:2)Xt = 0, (cid:2)Zt = 0). As shown in Fig. 3, when (cid:2)Xt = 0 and (cid:2)Zt 6\u00bc 0, the trajectory of the particle turns out to be an ellipse. When 6\u00bc 0 and (cid:2)Zt = 0, the trajectory of the particle forms a (cid:2)Xt straight line at a certain angle to the horizontal direction, with its two endpoints collected from projection angles 90(cid:3) and 270(cid:3). When (cid:2)Xt 6\u00bc 0 and (cid:2)Zt 6\u00bc 0, the trajectory of the particle will be a tilted ellipse, from which (cid:2)Xt and (cid:2)Zt can be calculated as (cid:2)Xt \u00bc arctan (cid:2) y1 (cid:4) y2 x1 (cid:4) x2 (cid:3) 180 (cid:5) ; (cid:2)Zt \u00bc arcsin ( (cid:4) \u00f0 \u00f0 x3 (cid:4) x4 x1 (cid:4) x2 \u00de2 \u00fe y3 (cid:4) y4 \u00f0 \u00de2 \u00fe y1 (cid:4) y2 \u00f0 \u00de2 \u00de2 (cid:5)1=2 ) 180 (cid:5) ; Figure 3 Particle trajectories under different rotation-axis misalignment situations. 172 Zhen Zhang et al. (cid:2) Automatic synchrotron tomographic alignment schemes J. Synchrotron Rad. (2023). 30, 169\u2013178 \u00f01\u00de \u00f02\u00de research papers where x1, x2, x3 and x4 are the horizontal coordinate values of P1, P2, P3 and P4, and y1, y2, y3 and y4 are the vertical coor- dinates values of P1, P2, P3 and P4, respectively. P1 and P2 are the vertices of the major axis of the ellipse \ufb01tted to the trajectory of the feature particle, while P3 and P4 are the two points on the ellipse with the same x-coordinate of the midpoint of the minor axis. A two-step alignment procedure is introduced for the rotation-axis alignment: coarse alignment and \ufb01ne alignment, as shown in Fig. 4. For the coarse alignment, the tilt angles of motor (cid:3) and motor (cid:4) are corrected by equations (1) and (2). For the \ufb01ne alignment of the rotation axis based on the GA, a series of individuals of random rotation-axis positions (motor (cid:3) and motor (cid:4)) are generated to form the initial population around the coarsely aligned rotation-axis position. The population \ufb01tness is assessed according to the trajectory characteristics of the strong absorbing particle. After several rounds of selection, crossover and mutation, the population \ufb01nally reaches convergence and obtains the optimum adjust- ment angles. To avoid repetition in data acquisition, the trajectory information of new individuals in the previous generations will be stored for the new iteration. Typically, we set two adjustment accuracy modes to accommodate different adjustment needs: (a) 15 population iterations for a popula- tion of 20 individuals and (b) 15 population iterations for a population of 30 individuals. The number of population iterations and individuals are application-scenario-dependent input parameters for the alignment program. The program can also be terminated early by human intervention if the popu- lation has converged. 2.3. Sample alignment To simulate the projection images for a misaligned sample with respect to the rotation axis, an offset was applied on the sample. In the virtual experiment, this offset is a combination of the offsets of the two sample motors (motor x and motor z), which we denote as offset_ x and offset_ z. The physical model for the coarse alignment is shown in Fig. S1 of the supporting information. During the coarse alignment of the sample, \ufb01rstly we performed one coarse tomography scan and checked whether the sample was within the \ufb01eld of view (FoV) of the detector for all projections. If the sample was falling out of the FoV at certain projections, another scan was performed from Figure 4 (a) The process of \ufb01ne alignment of the rotation axis. Genetic-algorithm-based selection, crossover, mutation and inheritance processes for rotating-axis individuals. (b) Framework design of the rotation alignment software. The blue color indicates the rotation alignment algorithm and its associated functional modules, and the orange color indicates the GUI module. J. Synchrotron Rad. (2023). 30, 169\u2013178 Zhen Zhang et al. (cid:2) Automatic synchrotron tomographic alignment schemes 173 research papers 0(cid:3) to 180(cid:3) to \ufb01nd the projection angle !1 where the sample was completely rotated back into the FoV and the angle !2 where the center of the sample reached the center of the detector. After that, we obtained the distance between the sample center and the detector center at the !1 angle and denoted this distance as distance_ !1. Among them, the offsets of the two motors can be expressed as Here, according to the relationship of the offset and the reference angles, we can obtain offset_ x and offset_ z by equations (5) and (6), offset x \u2019 distance !1 sin\u00f0!1\u00de (cid:4) cos\u00f0!1\u00de tan\u00f0!2\u00de ; offset z \u2019 (cid:4)offset x tan\u00f0!2\u00de: tan !2\u00f0 \u00de \u2019 (cid:4) offset x offset z : Meanwhile, distance_ !1 can be expressed as the superposition of two offsets at angle !1, distance !1 \u00bc offset x sin\u00f0!1\u00de \u00fe offset z cos\u00f0!1\u00de: \u00f03\u00de \u00f04\u00de The sample was then moved according to the calculated offset_ x and offset_ z for the coarse alignment. Following the coarse alignment, a \ufb01ne alignment process triggered by genetic algorithm is required for further alignment work as shown in Fig. 5. Based on genetic algorithm, we use movement"}, {"question": " What is the purpose of the movement described in the virtual experiment?", "answer": " To simulate the projection images for a misaligned sample with respect to the rotation axis", "ref_chunk": "171 research papers Figure 2 (a) Sample positioning stage. Motor x and motor z control the movement of the sample, the rotation motor controls the rotation of the sample, and motor (cid:3) and motor (cid:4) control the tilt of the rotation axis. (b) Rotary-axis tilt model. The tilt angle of the axis of rotation can be split into the superposition of two orthogonal vectors. (c) Physical model of the rotary axis coarse alignment. The adjustment angle of the axis of rotation is roughly calculated from the coordinates of the four feature points. alignment scenario, the staff usually use a needle or other standard sample with one strong absorbing particle. There- fore, temporarily, here we only extract and track one strong absorbing particle of the walnut sample, which can be easily \ufb01ltered out by setting a higher grayscale threshold to obtain its motion trajectory. Ideally, the trajectory of the particle will form a straight line after one turn of rotation without any tilt ((cid:2)Xt = 0, (cid:2)Zt = 0). As shown in Fig. 3, when (cid:2)Xt = 0 and (cid:2)Zt 6\u00bc 0, the trajectory of the particle turns out to be an ellipse. When 6\u00bc 0 and (cid:2)Zt = 0, the trajectory of the particle forms a (cid:2)Xt straight line at a certain angle to the horizontal direction, with its two endpoints collected from projection angles 90(cid:3) and 270(cid:3). When (cid:2)Xt 6\u00bc 0 and (cid:2)Zt 6\u00bc 0, the trajectory of the particle will be a tilted ellipse, from which (cid:2)Xt and (cid:2)Zt can be calculated as (cid:2)Xt \u00bc arctan (cid:2) y1 (cid:4) y2 x1 (cid:4) x2 (cid:3) 180 (cid:5) ; (cid:2)Zt \u00bc arcsin ( (cid:4) \u00f0 \u00f0 x3 (cid:4) x4 x1 (cid:4) x2 \u00de2 \u00fe y3 (cid:4) y4 \u00f0 \u00de2 \u00fe y1 (cid:4) y2 \u00f0 \u00de2 \u00de2 (cid:5)1=2 ) 180 (cid:5) ; Figure 3 Particle trajectories under different rotation-axis misalignment situations. 172 Zhen Zhang et al. (cid:2) Automatic synchrotron tomographic alignment schemes J. Synchrotron Rad. (2023). 30, 169\u2013178 \u00f01\u00de \u00f02\u00de research papers where x1, x2, x3 and x4 are the horizontal coordinate values of P1, P2, P3 and P4, and y1, y2, y3 and y4 are the vertical coor- dinates values of P1, P2, P3 and P4, respectively. P1 and P2 are the vertices of the major axis of the ellipse \ufb01tted to the trajectory of the feature particle, while P3 and P4 are the two points on the ellipse with the same x-coordinate of the midpoint of the minor axis. A two-step alignment procedure is introduced for the rotation-axis alignment: coarse alignment and \ufb01ne alignment, as shown in Fig. 4. For the coarse alignment, the tilt angles of motor (cid:3) and motor (cid:4) are corrected by equations (1) and (2). For the \ufb01ne alignment of the rotation axis based on the GA, a series of individuals of random rotation-axis positions (motor (cid:3) and motor (cid:4)) are generated to form the initial population around the coarsely aligned rotation-axis position. The population \ufb01tness is assessed according to the trajectory characteristics of the strong absorbing particle. After several rounds of selection, crossover and mutation, the population \ufb01nally reaches convergence and obtains the optimum adjust- ment angles. To avoid repetition in data acquisition, the trajectory information of new individuals in the previous generations will be stored for the new iteration. Typically, we set two adjustment accuracy modes to accommodate different adjustment needs: (a) 15 population iterations for a popula- tion of 20 individuals and (b) 15 population iterations for a population of 30 individuals. The number of population iterations and individuals are application-scenario-dependent input parameters for the alignment program. The program can also be terminated early by human intervention if the popu- lation has converged. 2.3. Sample alignment To simulate the projection images for a misaligned sample with respect to the rotation axis, an offset was applied on the sample. In the virtual experiment, this offset is a combination of the offsets of the two sample motors (motor x and motor z), which we denote as offset_ x and offset_ z. The physical model for the coarse alignment is shown in Fig. S1 of the supporting information. During the coarse alignment of the sample, \ufb01rstly we performed one coarse tomography scan and checked whether the sample was within the \ufb01eld of view (FoV) of the detector for all projections. If the sample was falling out of the FoV at certain projections, another scan was performed from Figure 4 (a) The process of \ufb01ne alignment of the rotation axis. Genetic-algorithm-based selection, crossover, mutation and inheritance processes for rotating-axis individuals. (b) Framework design of the rotation alignment software. The blue color indicates the rotation alignment algorithm and its associated functional modules, and the orange color indicates the GUI module. J. Synchrotron Rad. (2023). 30, 169\u2013178 Zhen Zhang et al. (cid:2) Automatic synchrotron tomographic alignment schemes 173 research papers 0(cid:3) to 180(cid:3) to \ufb01nd the projection angle !1 where the sample was completely rotated back into the FoV and the angle !2 where the center of the sample reached the center of the detector. After that, we obtained the distance between the sample center and the detector center at the !1 angle and denoted this distance as distance_ !1. Among them, the offsets of the two motors can be expressed as Here, according to the relationship of the offset and the reference angles, we can obtain offset_ x and offset_ z by equations (5) and (6), offset x \u2019 distance !1 sin\u00f0!1\u00de (cid:4) cos\u00f0!1\u00de tan\u00f0!2\u00de ; offset z \u2019 (cid:4)offset x tan\u00f0!2\u00de: tan !2\u00f0 \u00de \u2019 (cid:4) offset x offset z : Meanwhile, distance_ !1 can be expressed as the superposition of two offsets at angle !1, distance !1 \u00bc offset x sin\u00f0!1\u00de \u00fe offset z cos\u00f0!1\u00de: \u00f03\u00de \u00f04\u00de The sample was then moved according to the calculated offset_ x and offset_ z for the coarse alignment. Following the coarse alignment, a \ufb01ne alignment process triggered by genetic algorithm is required for further alignment work as shown in Fig. 5. Based on genetic algorithm, we use movement"}], "doc_text": "171 research papers Figure 2 (a) Sample positioning stage. Motor x and motor z control the movement of the sample, the rotation motor controls the rotation of the sample, and motor (cid:3) and motor (cid:4) control the tilt of the rotation axis. (b) Rotary-axis tilt model. The tilt angle of the axis of rotation can be split into the superposition of two orthogonal vectors. (c) Physical model of the rotary axis coarse alignment. The adjustment angle of the axis of rotation is roughly calculated from the coordinates of the four feature points. alignment scenario, the staff usually use a needle or other standard sample with one strong absorbing particle. There- fore, temporarily, here we only extract and track one strong absorbing particle of the walnut sample, which can be easily \ufb01ltered out by setting a higher grayscale threshold to obtain its motion trajectory. Ideally, the trajectory of the particle will form a straight line after one turn of rotation without any tilt ((cid:2)Xt = 0, (cid:2)Zt = 0). As shown in Fig. 3, when (cid:2)Xt = 0 and (cid:2)Zt 6\u00bc 0, the trajectory of the particle turns out to be an ellipse. When 6\u00bc 0 and (cid:2)Zt = 0, the trajectory of the particle forms a (cid:2)Xt straight line at a certain angle to the horizontal direction, with its two endpoints collected from projection angles 90(cid:3) and 270(cid:3). When (cid:2)Xt 6\u00bc 0 and (cid:2)Zt 6\u00bc 0, the trajectory of the particle will be a tilted ellipse, from which (cid:2)Xt and (cid:2)Zt can be calculated as (cid:2)Xt \u00bc arctan (cid:2) y1 (cid:4) y2 x1 (cid:4) x2 (cid:3) 180 (cid:5) ; (cid:2)Zt \u00bc arcsin ( (cid:4) \u00f0 \u00f0 x3 (cid:4) x4 x1 (cid:4) x2 \u00de2 \u00fe y3 (cid:4) y4 \u00f0 \u00de2 \u00fe y1 (cid:4) y2 \u00f0 \u00de2 \u00de2 (cid:5)1=2 ) 180 (cid:5) ; Figure 3 Particle trajectories under different rotation-axis misalignment situations. 172 Zhen Zhang et al. (cid:2) Automatic synchrotron tomographic alignment schemes J. Synchrotron Rad. (2023). 30, 169\u2013178 \u00f01\u00de \u00f02\u00de research papers where x1, x2, x3 and x4 are the horizontal coordinate values of P1, P2, P3 and P4, and y1, y2, y3 and y4 are the vertical coor- dinates values of P1, P2, P3 and P4, respectively. P1 and P2 are the vertices of the major axis of the ellipse \ufb01tted to the trajectory of the feature particle, while P3 and P4 are the two points on the ellipse with the same x-coordinate of the midpoint of the minor axis. A two-step alignment procedure is introduced for the rotation-axis alignment: coarse alignment and \ufb01ne alignment, as shown in Fig. 4. For the coarse alignment, the tilt angles of motor (cid:3) and motor (cid:4) are corrected by equations (1) and (2). For the \ufb01ne alignment of the rotation axis based on the GA, a series of individuals of random rotation-axis positions (motor (cid:3) and motor (cid:4)) are generated to form the initial population around the coarsely aligned rotation-axis position. The population \ufb01tness is assessed according to the trajectory characteristics of the strong absorbing particle. After several rounds of selection, crossover and mutation, the population \ufb01nally reaches convergence and obtains the optimum adjust- ment angles. To avoid repetition in data acquisition, the trajectory information of new individuals in the previous generations will be stored for the new iteration. Typically, we set two adjustment accuracy modes to accommodate different adjustment needs: (a) 15 population iterations for a popula- tion of 20 individuals and (b) 15 population iterations for a population of 30 individuals. The number of population iterations and individuals are application-scenario-dependent input parameters for the alignment program. The program can also be terminated early by human intervention if the popu- lation has converged. 2.3. Sample alignment To simulate the projection images for a misaligned sample with respect to the rotation axis, an offset was applied on the sample. In the virtual experiment, this offset is a combination of the offsets of the two sample motors (motor x and motor z), which we denote as offset_ x and offset_ z. The physical model for the coarse alignment is shown in Fig. S1 of the supporting information. During the coarse alignment of the sample, \ufb01rstly we performed one coarse tomography scan and checked whether the sample was within the \ufb01eld of view (FoV) of the detector for all projections. If the sample was falling out of the FoV at certain projections, another scan was performed from Figure 4 (a) The process of \ufb01ne alignment of the rotation axis. Genetic-algorithm-based selection, crossover, mutation and inheritance processes for rotating-axis individuals. (b) Framework design of the rotation alignment software. The blue color indicates the rotation alignment algorithm and its associated functional modules, and the orange color indicates the GUI module. J. Synchrotron Rad. (2023). 30, 169\u2013178 Zhen Zhang et al. (cid:2) Automatic synchrotron tomographic alignment schemes 173 research papers 0(cid:3) to 180(cid:3) to \ufb01nd the projection angle !1 where the sample was completely rotated back into the FoV and the angle !2 where the center of the sample reached the center of the detector. After that, we obtained the distance between the sample center and the detector center at the !1 angle and denoted this distance as distance_ !1. Among them, the offsets of the two motors can be expressed as Here, according to the relationship of the offset and the reference angles, we can obtain offset_ x and offset_ z by equations (5) and (6), offset x \u2019 distance !1 sin\u00f0!1\u00de (cid:4) cos\u00f0!1\u00de tan\u00f0!2\u00de ; offset z \u2019 (cid:4)offset x tan\u00f0!2\u00de: tan !2\u00f0 \u00de \u2019 (cid:4) offset x offset z : Meanwhile, distance_ !1 can be expressed as the superposition of two offsets at angle !1, distance !1 \u00bc offset x sin\u00f0!1\u00de \u00fe offset z cos\u00f0!1\u00de: \u00f03\u00de \u00f04\u00de The sample was then moved according to the calculated offset_ x and offset_ z for the coarse alignment. Following the coarse alignment, a \ufb01ne alignment process triggered by genetic algorithm is required for further alignment work as shown in Fig. 5. Based on genetic algorithm, we use movement"}